System.register(["jimu-core","jimu-arcgis"],(function(e,t){var a={},i={};return{setters:[function(e){a.AbstractMessageAction=e.AbstractMessageAction,a.MessageType=e.MessageType,a.appActions=e.appActions,a.getAppStore=e.getAppStore},function(e){i.MapViewManager=e.MapViewManager}],execute:function(){e((()=>{"use strict";var e={686:e=>{e.exports=i},244:e=>{e.exports=a}},t={};function r(a){var i=t[a];if(void 0!==i)return i.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,r),s.exports}r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{r.r(s),r.d(s,{default:()=>a});var e=r(244),t=r(686);class a extends e.AbstractMessageAction{filterMessageDescription(t){return[e.MessageType.StringSelectionChange,e.MessageType.DataRecordsSelectionChange].includes(t.messageType)}filterMessage(e){return!0}getSettingComponentUri(e,t){return"actions/query-action-setting"}toggleLayerVisibility(e,a,i){const r=t.MapViewManager.getInstance(),s=r.getJimuMapViewById(e);if(console.log(r.getAllJimuMapViewIds()),s){const e=s.view,t=e.map.layers.items;console.log("layers",t),t.forEach((e=>{console.log(e.id,e.title)}));const r=e.map.findLayerById(a);if(console.log("targetLayer",r),r){r.layers.forEach((e=>{console.log(e.id,e.title)})),r.visible=i,r.layers.items[0].visible=i,r.layers.items[1].visible=i,r.layers.items[2].visible=i;e.map.findLayerById("1927a03ea46-layer-9").visible=i;e.map.findLayerById("1927a6b0c32-layer-42").visible=i;const t=e.map.findLayerById("1927a9bca9f-layer-51"),s=e.map.findLayerById("1927aa0cf05-layer-52");t.visible=i,s.visible=i;e.map.findLayerById("1927a0458b0-layer-12").visible=i,console.log(`Layer ${a} visibility set to ${i}`)}else console.warn("Layer not found")}else console.warn("MapView not found")}onExecute(t,a){let i=`${a.fieldName} = '${t}'`;switch(t.type){case e.MessageType.StringSelectionChange:i=`${a.fieldName} = '${t.str}'`;break;case e.MessageType.DataRecordsSelectionChange:let r=!0;try{i=`${a.fieldName} = '${t.records[0].getFieldValue(a.fieldName)}'`,console.log("DataRecordsSelectionChange",t)}catch(e){r=!1}const s=a.mapViewId||"widget_585-dataSource_157",o=a.layerId||"1927a69e10f-layer-41";this.toggleLayerVisibility(s,o,r)}return(0,e.getAppStore)().dispatch(e.appActions.widgetStatePropChange(this.widgetId,"queryString",i)),!0}}})(),s})())}}}));